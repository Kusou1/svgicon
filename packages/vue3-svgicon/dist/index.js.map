{"version":3,"file":"index.js","sources":["../../svgicon/dist/utils.js","../../svgicon/dist/index.js","../src/index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction getRandomInt(min, max) {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min)) + min; //不含最大值，含最小值\n}\nvar idSeed = 0;\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\nexports.default = {\n    genUID: function () {\n        idSeed++;\n        return (idSeed +\n            '_' +\n            [1, 2, 3, 4, 5]\n                .map(function () { return chars[getRandomInt(0, chars.length)]; })\n                .join(''));\n    },\n};\n//# sourceMappingURL=utils.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.svgIcon = exports.getPropKeys = exports.setOptions = void 0;\nvar utils_1 = __importDefault(require(\"./utils\"));\nvar options = {\n    defaultWidth: '',\n    defaultHeight: '',\n    classPrefix: 'svg',\n    isStroke: false,\n    isOriginalDefault: false,\n};\nfunction initProps(props) {\n    props = __assign({}, props);\n    // delete undefined prop\n    Object.keys(props).forEach(function (key) {\n        if (props[key] === void 0) {\n            delete props[key];\n        }\n    });\n    if (typeof props.original === 'string') {\n        props.original = true;\n    }\n    if (typeof props.fill === 'string') {\n        props.fill = true;\n    }\n    return __assign({\n        width: options.defaultWidth,\n        height: options.defaultHeight,\n        fill: !options.isStroke,\n        original: !!options.isOriginalDefault,\n    }, props);\n}\nfunction getColors(props) {\n    if (props.color) {\n        return props.color.split(' ');\n    }\n    return [];\n}\nfunction getClassName(props) {\n    var clazz = options.classPrefix + \"-icon\";\n    if (props.fill) {\n        clazz += \" \" + options.classPrefix + \"-fill\";\n    }\n    if (props.dir) {\n        clazz += \" \" + options.classPrefix + \"-\" + props.dir;\n    }\n    return clazz;\n}\nfunction setTitle(pathData, props) {\n    if (props.title) {\n        var title = props.title\n            .replace(/</gi, '&lt;')\n            .replace(/>/gi, '&gt;')\n            .replace(/&/g, '&amp;');\n        return \"<title>\" + title + \"</title>\" + pathData;\n    }\n    return pathData;\n}\nfunction addOriginalColor(data) {\n    var styleReg = /_fill=\"|_stroke=\"/gi;\n    return data.replace(styleReg, function (styleName) {\n        return styleName && styleName.slice(1);\n    });\n}\nfunction getValidPathData(pathData, props, colors) {\n    // If use original and colors, clear double fill or stroke\n    if (props.original && colors.length > 0) {\n        var reg = /<(path|rect|circle|polygon|line|polyline|ellipse)(\\sfill|\\sstroke)([=\"\\w\\s.\\-+#$&>]+)(fill|stroke)/gi;\n        pathData = pathData.replace(reg, function (match, p1, p2, p3, p4) {\n            return \"<\" + p1 + p2 + p3 + \"_\" + p4;\n        });\n    }\n    return pathData;\n}\nfunction addColor(data, props, colors) {\n    var reg = /<(path|rect|circle|polygon|line|polyline|ellipse)\\s/gi;\n    var i = 0;\n    return data.replace(reg, function (match) {\n        var color = colors[i++] || colors[colors.length - 1];\n        var fill = props.fill;\n        // if color is '_', ignore it\n        if (color && color === '_') {\n            return match;\n        }\n        // if color start with 'r-', reverse the fill value\n        if (color && /^r-/.test(color)) {\n            fill = !fill;\n            color = color.substr(2);\n        }\n        var style = fill ? 'fill' : 'stroke';\n        var reverseStyle = fill ? 'stroke' : 'fill';\n        return match + (style + \"=\\\"\" + color + \"\\\" \" + reverseStyle + \"=\\\"none\\\" \");\n    });\n}\nfunction getPath(props, colors, iconData) {\n    var uid = utils_1.default.genUID();\n    var pathData = '';\n    if (iconData) {\n        pathData = iconData.data;\n        pathData = setTitle(pathData, props);\n        // use original color\n        if (props.original) {\n            pathData = addOriginalColor(pathData);\n        }\n        if (colors.length > 0) {\n            pathData = addColor(pathData, props, colors);\n        }\n        // fix #99, inline svg use random id\n        var idReg = /svgiconid([\\w-/\\\\]+)/g;\n        pathData = pathData.replace(idReg, function (match, elId) {\n            return \"svgiconid\" + elId + \"_\" + uid;\n        });\n    }\n    return getValidPathData(pathData, props, colors);\n}\nfunction getBox(props, iconData) {\n    if (iconData) {\n        if (iconData.viewBox) {\n            return iconData.viewBox;\n        }\n        return \"0 0 \" + iconData.width + \" \" + iconData.height;\n    }\n    var width = typeof props.width === 'number'\n        ? props.width\n        : parseFloat(props.width || '16');\n    var height = typeof props.height === 'number'\n        ? props.height\n        : parseFloat(props.height || '16');\n    return \"0 0 \" + width + \" \" + height;\n}\nfunction getStyle(props, iconData) {\n    var digitReg = /^\\d+$/;\n    var scale = props.scale;\n    var isScale = scale !== '' && scale !== undefined && scale !== null;\n    var width;\n    var height;\n    // apply scale\n    if (isScale && iconData && iconData.width && iconData.height) {\n        width = Number(iconData.width) * Number(scale) + 'px';\n        height = Number(iconData.height) * Number(scale) + 'px';\n    }\n    else {\n        width = digitReg.test(String(props.width || ''))\n            ? props.width + 'px'\n            : props.width || options.defaultWidth;\n        height = digitReg.test(String(props.height || ''))\n            ? props.height + 'px'\n            : props.height || options.defaultHeight;\n    }\n    var style = {};\n    if (width) {\n        style.width = width;\n    }\n    if (height) {\n        style.height = height;\n    }\n    return style;\n}\n/** set default options */\nfunction setOptions(newOptions) {\n    options = __assign(__assign({}, options), newOptions);\n}\nexports.setOptions = setOptions;\nfunction getPropKeys() {\n    return [\n        'data',\n        'color',\n        'dir',\n        'fill',\n        'height',\n        'width',\n        'title',\n        'scale',\n        'original',\n    ];\n}\nexports.getPropKeys = getPropKeys;\n/** get svgicon result by props */\nfunction svgIcon(props) {\n    props = initProps(props);\n    var colors = getColors(props);\n    var iconData = props.data && props.data.data ? props.data.data : null;\n    var className = getClassName(props);\n    var path = getPath(props, colors, iconData);\n    var box = getBox(props, iconData);\n    var style = getStyle(props, iconData);\n    return {\n        path: path,\n        box: box,\n        className: className,\n        style: style,\n    };\n}\nexports.svgIcon = svgIcon;\n//# sourceMappingURL=index.js.map","import { defineComponent, h, App } from 'vue'\n\nimport {\n    svgIcon,\n    Props,\n    Options,\n    setOptions,\n    Icon,\n    IconData,\n    getPropKeys,\n} from '@yzfe/svgicon'\n\nimport '@yzfe/svgicon/lib/svgicon.css'\n\nconst VueSvgIcon = defineComponent({\n    props: getPropKeys(),\n    render() {\n        const result = svgIcon(this.$props)\n\n        return h('svg', {\n            viewBox: result.box,\n            style: result.style,\n            class: result.className,\n            innerHTML: result.path,\n        })\n    },\n})\n\nconst VueSvgIconPlugin = {\n    install: (app: App, options: { tagName: string }): void => {\n        app.component(options.tagName, VueSvgIcon)\n    },\n}\n\nexport {\n    VueSvgIcon,\n    VueSvgIconPlugin,\n    setOptions,\n    Props,\n    Options,\n    Icon,\n    IconData,\n}\n"],"names":["Object","defineProperty","exports","value","idSeed","chars","genUID","map","min","max","length","Math","ceil","floor","random","join","__assign","this","assign","t","s","i","n","arguments","p","prototype","hasOwnProperty","call","apply","__importDefault","mod","__esModule","default","utils_1","require$$0","options","defaultWidth","defaultHeight","classPrefix","isStroke","isOriginalDefault","newOptions","props","colors","color","split","getColors","keys","forEach","key","original","fill","width","height","initProps","iconData","data","className","clazz","dir","getClassName","path","uid","pathData","title","replace","setTitle","styleName","slice","match","test","substr","addColor","elId","p1","p2","p3","p4","getValidPathData","getPath","box","viewBox","parseFloat","getBox","style","digitReg","scale","Number","String","getStyle","VueSvgIcon","defineComponent","getPropKeys","render","result","svgIcon","$props","h","class","innerHTML","VueSvgIconPlugin","install","app","component","tagName"],"mappings":"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"}